<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>file upload demo</title>
    <script type="text/javascript" src="http://lib.sinaapp.com/js/jquery/2.0.3/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="/src/ajax-file-upload.js"></script>
    <script type="text/javascript">
    $(function() {

        function upload() {
            // ajax upload
            $("#myFile").upload({
                action: 'upload.php',
                data: {
                    usage: "Avatar"
                },
                maxFileSize: 4194304
            }, null, function(prog, value) {
                console.log(value);
                $("#prog").val(value);
            }).done(function(data) {
                console.log('done', data);
            }).fail(function(error) {
                console.log('fail', error);
            });
        }

        $("#upload").on("click", function() {
            upload();
        });
    });
    </script>
</head>

<body>
    <input id="myFile" type="file"></input>
    <button id="upload">upload</button>
    <br/>
    <progress id="prog" value="0" min="0" max="100">
</body>

</html>
